<!DOCTYPE html>
<html>
<head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
</head>
<body style='margin : 0px; overflow: hidden;'>
    <a-scene embedded arjs='sourceType: webcam; debugUIEnabled: false;'>
        <!-- User's current location marker -->
        <a-sphere position='0 1.25 -5' radius='1.25' color='#EF2D5E'></a-sphere>
        <!-- Arrow object that points towards the destination -->
        <a-entity id="arrow" 
                  gltf-model="arrow.gltf"
                  position='0 2 -3'
                  scale="0.5 0.5 0.5"
                  rotation="0 0 0">
        </a-entity>
        <!-- Destination marker -->
        <a-marker gps-entity-place="latitude: 40.4773333; longitude: -74.4262500">
            <a-entity 
                gltf-model="arrow.gltf"
                scale="5 5 5"
                rotation="0 180 0">
            </a-entity>
        </a-marker>
        <a-camera gps-new-camera/>
    </a-scene>
    <script>
        var arrow = document.querySelector("#arrow");
        var destinationMarker = document.querySelector("a-marker");
        destinationMarker.addEventListener("gps-entity-place-update-positon", function(event){
            // get the position of the user (camera) and the position of the destination marker
            var userPosition = event.detail.position;
            var destinationPosition = destinationMarker.getAttribute("position");
            
            // calculate the direction from the user to the destination
            var direction = destinationPosition.subtract(userPosition).normalize();
            
            // make the arrow point towards the destination
            arrow.setAttribute("rotation", direction);
        });
    </script>
</body>
</html>


