var n=Object.defineProperty;var d=(s,e,r)=>e in s?n(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r;var c=(s,e,r)=>(d(s,typeof e!="symbol"?e+"":e,r),r);import{B as y,c as p}from"./component.decorator.a66a1cbe.js";import"./aframe-master.5ce7d00f.js";import"./test-helpers.473cda21.js";import"./change-detector.c919c1d0.js";var f=Object.defineProperty,u=Object.getOwnPropertyDescriptor,b=(s,e,r,t)=>{for(var a=t>1?void 0:t?u(e,r):e,i=s.length-1,h;i>=0;i--)(h=s[i])&&(a=(t?h(e,r,a):h(a))||a);return t&&a&&f(e,r,a),a};const L=21,A=0;var o;let l=(o=class extends y{constructor(){super(...arguments);c(this,"isArMode",!1);c(this,"changeDetector")}init(){var e,r;this.el.setAttribute("change-detector__three-layer",{recursive:!0,object3DSet:!0}),this.changeDetector=this.el.getAttribute("change-detector__three-layer"),this.changeDetector&&(this.el.addEventListener("detectorchanged__three-layer",()=>{this.updateAllElemLayers()}),(e=this.el.sceneEl)==null||e.addEventListener("enter-vr",()=>{var t;(t=this.el.sceneEl)!=null&&t.is("ar-mode")&&(this.isArMode=!0,this.updateAllElemLayers())}),(r=this.el.sceneEl)==null||r.addEventListener("exit-vr",()=>{this.isArMode=!1,this.updateAllElemLayers()}),this.updateAllElemLayers())}updateLayers(e,r=!1){e.disableAll(),r&&(e.enable(A),e.enable(L)),this.data.layers.forEach(t=>e.enable(t)),this.isArMode?this.data.arLayers.forEach(t=>e.enable(t)):this.data.desktopLayers.forEach(t=>e.enable(t))}updateAllElemLayers(){const e=(t,a)=>{this.updateLayers(t.layers,a)},r=t=>{if(t.object3D&&Object.entries(t.object3DMap).forEach(([a,i])=>e(i,t.hasAttribute("camera"))),t.hasAttribute&&t.hasAttribute("raycaster")){const a=t.components.raycaster.raycaster;this.updateLayers(a.layers)}Array.from(t.childNodes).forEach(a=>{const i=a;i.getAttribute&&i.getAttribute("three-layer")||r(i)})};r(this.el)}},c(o,"schema",{layers:{type:"array"},arLayers:{type:"array"},desktopLayers:{type:"array"}}),o);l=b([p("three-layer")],l);export{l as ThreeLayerComopnent,L as aframeCameraLayer,A as aframeLightingLayer};
