var m=Object.defineProperty;var A=(n,t,i)=>t in n?m(n,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[t]=i;var o=(n,t,i)=>(A(n,typeof t!="symbol"?t+"":t,i),i);import{d}from"./AFrameScene.vue.da3794e4.js";import{B as E,c as y}from"./component.decorator.a66a1cbe.js";import"./aframe-master.5ce7d00f.js";import"./test-helpers.473cda21.js";import"./entry.5096a9c3.js";import"./usePublic.8745ebfa.js";var R=Object.defineProperty,v=Object.getOwnPropertyDescriptor,b=(n,t,i,s)=>{for(var e=s>1?void 0:s?v(t,i):t,a=n.length-1,c;a>=0;a--)(c=n[a])&&(e=(s?c(t,i,e):c(e))||e);return s&&e&&R(t,i,e),e};const r=AFRAME.THREE,l=AFRAME.ANIME,u=180/Math.PI;var h;let p=(h=class extends E{constructor(){super(...arguments);o(this,"toEntity");o(this,"isAtToEntity",!1);o(this,"currPositionAnimation");o(this,"currRotationAnimation");o(this,"initialPosition",new r.Vector3);o(this,"initialRotation",new r.Euler);o(this,"currPosition",new r.Vector3);o(this,"currRotation",new r.Euler)}init(){this.initialPosition.copy(this.el.object3D.position),this.initialRotation.copy(this.el.object3D.rotation),this.currPosition.copy(this.initialPosition),this.currRotation.copy(this.initialRotation),this.el.setAttribute("geometry",{primitive:"sphere",radius:this.data.interactRadius}),this.el.setAttribute("material",{transparent:!0,opacity:0}),this.el.setAttribute("animation__mouseenter",{property:"scale",startEvents:"mouseenter",easing:"easeInCubic",dur:150,to:"1.1 1.1 1.1"}),this.el.setAttribute("animation__mouseleave",{property:"scale",startEvents:"mouseleave",easing:"easeInCubic",dur:150,to:"1 1 1"}),this.el.setAttribute("animation__click",{property:"scale",startEvents:"click",easing:"easeInCubic",dur:150,to:"1 1 1"}),this.el.classList.add("clickable"),this.el.addEventListener("click",()=>{if(!this.toEntity)return;(this.currPositionAnimation!=null&&!this.currPositionAnimation.completed||this.currRotationAnimation!=null&&!this.currRotationAnimation.completed)&&(l.remove(this.currPosition),l.remove(this.currRotation)),this.el.removeAttribute("animation__spin-on-toentity");const t=this.isAtToEntity?this.initialPosition:this.toEntity.object3D.position,i=this.isAtToEntity?this.initialRotation:this.toEntity.object3D.rotation;this.isAtToEntity=!this.isAtToEntity,this.currPositionAnimation=AFRAME.ANIME({targets:this.currPosition,x:t==null?void 0:t.x,y:t==null?void 0:t.y,z:t==null?void 0:t.z,easing:"easeInOutQuad",duration:this.data.duration}),this.currRotationAnimation=AFRAME.ANIME({targets:this.currRotation,x:i.x,y:i.y,z:i.z,easing:"easeInOutQuad",duration:this.data.duration,complete:()=>{this.toEntity&&this.isAtToEntity&&(this.currRotationAnimation=AFRAME.ANIME({targets:this.currRotation,y:this.currRotation.y+2*Math.PI,easing:"linear",duration:this.data.spinDuration,loop:!0}))}})})}tick(){this.el.setAttribute("position",this.currPosition),this.el.setAttribute("rotation",{x:this.currRotation.x*u,y:this.currRotation.y*u,z:this.currRotation.z*u})}update(){this.toEntity=d.querySelector(this.data.toEntity)}},o(h,"schema",{toEntity:{default:""},interactRadius:{default:3},duration:{default:1e3},spinOnToEntity:{default:!1},spinDuration:{default:1e4}}),h);p=b([y("click-move")],p);export{p as ClickMoveComponent};
