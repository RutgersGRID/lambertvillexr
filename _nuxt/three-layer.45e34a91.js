var o=Object.defineProperty;var d=(i,e,r)=>e in i?o(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r;var l=(i,e,r)=>(d(i,typeof e!="symbol"?e+"":e,r),r);import{B as y,c as u}from"./component.decorator.a66a1cbe.js";import"./aframe-master.5ce7d00f.js";import"./test-helpers.473cda21.js";import"./change-detector.15c8fb51.js";var p=Object.defineProperty,f=Object.getOwnPropertyDescriptor,m=(i,e,r,t)=>{for(var a=t>1?void 0:t?f(e,r):e,s=i.length-1,n;s>=0;s--)(n=i[s])&&(a=(t?n(e,r,a):n(a))||a);return t&&a&&p(e,r,a),a};const E=21,A=0;var h;let c=(h=class extends y{constructor(){super(...arguments);l(this,"isArMode",!1);l(this,"changeDetector")}init(){var e,r,t,a;this.el.setAttribute("change-detector__three-layer",{recursive:!0,object3DSet:!0}),this.changeDetector=this.el.getAttribute("change-detector__three-layer"),this.changeDetector&&(this.el.addEventListener("detectorchanged__three-layer",()=>{this.updateAllElemLayers()}),(e=this.el.sceneEl)==null||e.addEventListener("enter-manual-vr",()=>{var s;console.log("enter manual ar mode"),(s=this.el.sceneEl)!=null&&s.hasAttribute("manual-ar-mode")&&(this.isArMode=!0,this.updateAllElemLayers())}),(r=this.el.sceneEl)==null||r.addEventListener("exit-manual-vr",()=>{this.isArMode=!1,this.updateAllElemLayers()}),(t=this.el.sceneEl)==null||t.addEventListener("enter-vr",()=>{var s;(s=this.el.sceneEl)!=null&&s.is("ar-mode")&&(this.isArMode=!0,this.updateAllElemLayers())}),(a=this.el.sceneEl)==null||a.addEventListener("exit-vr",()=>{this.isArMode=!1,this.updateAllElemLayers()}),this.updateAllElemLayers())}updateLayers(e,r=!1){e.disableAll(),r&&(e.enable(A),e.enable(E)),this.data.layers.forEach(t=>e.enable(t)),this.isArMode?this.data.arLayers.forEach(t=>e.enable(t)):this.data.desktopLayers.forEach(t=>e.enable(t))}updateAllElemLayers(){const e=(t,a)=>{this.updateLayers(t.layers,a)},r=t=>{if(t.object3D&&Object.entries(t.object3DMap).forEach(([a,s])=>e(s,t.hasAttribute("camera"))),t.hasAttribute&&t.hasAttribute("raycaster")){const a=t.components.raycaster.raycaster;this.updateLayers(a.layers)}Array.from(t.childNodes).forEach(a=>{const s=a;s.getAttribute&&s.getAttribute("three-layer")||r(s)})};r(this.el)}},l(h,"schema",{layers:{type:"array"},arLayers:{type:"array"},desktopLayers:{type:"array"}}),h);c=m([u("three-layer")],c);export{c as ThreeLayerComopnent,E as aframeCameraLayer,A as aframeLightingLayer};
